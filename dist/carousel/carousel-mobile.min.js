!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.CarouselMobile=t()}("undefined"!=typeof self?self:this,function(){"use strict";var a={CAROUSEL_WRAP:"#carouselWrap"},t="carousel-wrap",o="carousel-image";function e(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent?e.attachEvent("on"+t,s):e["on"+t]=s}var s=function(e,t){var s=this;!function(e,t,s){for(var r in t)!t.hasOwnProperty(r)||e.hasOwnProperty(r)&&!s||(e[r]=t[r])}(this.carouselOptions,t,!0),s.carousel=document.querySelector(e),s.carousel.appendChild(s.getImgs()),s.carouselWrap=document.querySelector(a.CAROUSEL_WRAP);var r=setInterval(function(){s.isCarouselComplete()&&(clearInterval(r),s.initCarousel())},50)};return s.prototype={carouselOptions:{carouselTime:3e3},isCarouselComplete:function(){for(var e=0,t=0;t<this.carouselWrap.children.length;t++)this.carouselWrap.children[t].complete&&e++;return e===this.carouselWrap.children.length},initCarousel:function(e,t){this.carouselCount=this.carouselWrap.children.length,this.setCarousel(),this.carouselIndex=1,this.carouselTimer=null,this.carouselDuration=300,this.isCarouselAnimate=!1,this.t={sx:0,s:0,m:0,e:0},this.bindCarousel(),this.playCarousel()},setCarousel:function(){var e=this,t=e.carouselWrap.children[0].cloneNode(!0),s=e.carouselWrap.children[e.carouselCount-1].cloneNode(!0);e.carouselWrap.insertBefore(s,e.carouselWrap.children[0]),e.carouselWrap.appendChild(t),e.carouselWidth=e.getCarouselWidth(),e.setTransform(e.carouselWrap,-e.carouselWidth)},getCarouselWidth:function(){return parseInt(this.carousel.offsetWidth)},setTransform:function(e,t){e.style.transform="translate3d("+t+"px, 0px, 0px)",e.style["-webkit-transform"]="translate3d("+t+"px, 0px, 0px)",e.style["-ms-transform"]="translate3d("+t+"px, 0px, 0px)"},getTransform:function(){var e=this.carouselWrap.style.transform||this.carouselWrap.style["-webkit-transform"]||this.carouselWrap.style["-ms-transform"];return e=(e=e.substring(12)).match(/(\S*)px/)[1],Number(e)},getImgs:function(){var e=document.createElement("div");e.setAttribute("class",t),e.setAttribute("id",a.CAROUSEL_WRAP.substring(1,a.CAROUSEL_WRAP.length));var s=document.createDocumentFragment(),r=document.createElement("img");return this.carouselOptions.carouselImages.forEach(function(e,t){(r=r.cloneNode(!1)).setAttribute("class",o),r.setAttribute("src",e),r.setAttribute("alt",t+1),s.appendChild(r)}),e.appendChild(s),e},playCarousel:function(){var e=this;this.carouselTimer=window.setInterval(function(){e.nextCarousel()},this.carouselOptions.carouselTime)},bindCarousel:function(){var s=this;e(this.carousel,"touchstart",function(e){s.isCarouselAnimate||(clearInterval(s.carouselTimer),s.t.sx=s.getTransform(),s.t.s=e.changedTouches[e.changedTouches.length-1].clientX)}),e(this.carousel,"touchmove",function(e){s.isCarouselAnimate||-1==s.t.s||(clearInterval(s.carouselTimer),s.t.m=e.changedTouches[e.changedTouches.length-1].clientX-s.t.s,s.setTransform(s.carouselWrap,s.t.m+s.t.sx))}),e(this.carousel,"touchend",function(e){if(!s.isCarouselAnimate&&-1!=s.t.s){clearInterval(s.carouselTimer),s.setTransform(s.carouselWrap,s.t.m+s.t.sx);var t=s.getTransform();t+=0<s.t.m?.3*s.carouselWidth:-.3*s.carouselWidth,s.carouselIndex=-1*Math.round(t/s.carouselWidth),s.moveCarousel(s.carouselIndex*-s.carouselWidth),s.carouselIndex>s.carouselCount&&(s.carouselIndex=1),s.carouselIndex<1&&(s.carouselIndex=s.carouselCount),s.playCarousel()}})},nextCarousel:function(){this.isCarouselAnimate||(this.carouselIndex++,this.carouselIndex>this.carouselCount&&(this.carouselIndex=1),this.moveCarousel(this.getTransform()-this.carouselWidth))},moveCarousel:function(e){var t=this;t.isCarouselAnimate=!0,this.carouselWrap.style.transition="350ms",t.setTransform(t.carouselWrap,e),t.resetCarousel(e)},resetCarousel:function(e){var t=this;window.setTimeout(function(){t.resetMoveCarousel(e),t.isCarouselAnimate=!1},t.carouselDuration)},resetMoveCarousel:function(e){this.carouselWrap.style.transition="0s",this.setTransform(this.carouselWrap,e),e>-this.carouselWidth&&this.setTransform(this.carouselWrap,-this.carouselCount*this.carouselWidth),e<-this.carouselWidth*this.carouselCount&&this.setTransform(this.carouselWrap,-this.carouselWidth)},constructor:s},s});