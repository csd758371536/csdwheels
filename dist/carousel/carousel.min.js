!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Carousel=t()}("undefined"!=typeof self?self:this,function(){"use strict";var a={CAROUSEL_WRAP:"#carouselWrap",CAROUSEL_DOTS:"#carouselDots",ARROW_LEFT:"#arrowLeft",ARROW_RIGHT:"#arrowRight"},t="carousel-wrap",i="carousel-image",n="carousel-buttons-wrap",u="carousel-buttons",l="carousel-button",s="carousel-button on",r="carousel-arrow arrow-left",o="carousel-arrow arrow-right";function c(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent?e.attachEvent("on"+t,s):e["on"+t]=s}!function(){for(var o=0,e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var s=(new Date).getTime(),r=Math.max(0,16.7-(s-o)),i=window.setTimeout(function(){e(s+r)},r);return o=s+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var e=function(e,t){var s=this;!function(e,t,s){for(var r in t)!t.hasOwnProperty(r)||e.hasOwnProperty(r)&&!s||(e[r]=t[r])}(this.carouselOptions,t,!0),s.carousel=document.querySelector(e),s.carousel.appendChild(s.getImgs()),s.carouselWrap=document.querySelector(a.CAROUSEL_WRAP);var r=setInterval(function(){s.isCarouselComplete()&&(clearInterval(r),s.initCarousel(),s.initDots(),s.initArrows())},50)};return e.prototype={carouselOptions:{showCarouselArrow:!0,showCarouselDot:!0,carouselInterval:3e3,carouselAnimateTime:150,carouselAnimateInterval:10},isCarouselComplete:function(){for(var e=0,t=0;t<this.carouselWrap.children.length;t++)this.carouselWrap.children[t].complete&&e++;return e===this.carouselWrap.children.length},initCarousel:function(e,t){this.carouselCount=this.carouselWrap.children.length,this.setCarousel(),this.carouselIndex=1,this.carouselIntervalr=null,this.carouselAnimateSpeed=this.carouselWidth/(this.carouselOptions.carouselAnimateTime/this.carouselOptions.carouselAnimateInterval),this.isCarouselAnimate=!1,this.isDotClick=!1,this.bindCarousel(),this.playCarousel()},setCarousel:function(){var e=this.carouselWrap.children[0].cloneNode(!0),t=this.carouselWrap.children[this.carouselCount-1].cloneNode(!0);this.carouselWrap.insertBefore(t,this.carouselWrap.children[0]),this.carouselWrap.appendChild(e),this.setWidth(this.carousel,this.carouselOptions.carouselWidth),this.setHeight(this.carousel,this.carouselOptions.carouselHeight),this.carouselWidth=this.getWidth(this.carousel),this.setLeft(this.carouselWrap,-this.carouselWidth),this.setWidth(this.carouselWrap,this.carouselWidth*this.carouselWrap.children.length)},setWidth:function(e,t){e.style.width=t+"px"},setHeight:function(e,t){e.style.height=t+"px"},getWidth:function(e){return parseInt(e.style.width)},setLeft:function(e,t){e.style.left=t+"px"},getLeft:function(e){return parseInt(e.style.left)},getImgs:function(){var e=document.createElement("div");e.setAttribute("class",t),e.setAttribute("id",a.CAROUSEL_WRAP.substring(1,a.CAROUSEL_WRAP.length));var s=document.createDocumentFragment(),r=document.createElement("img");return this.carouselOptions.carouselImages.forEach(function(e,t){(r=r.cloneNode(!1)).setAttribute("class",i),r.setAttribute("src",e),r.setAttribute("alt",t+1),s.appendChild(r)}),e.appendChild(s),e},initArrows:function(){this.carouselOptions.showCarouselArrow&&(this.carousel.appendChild(this.getArrows()),this.arrowLeft=document.querySelector(a.ARROW_LEFT),this.arrowRight=document.querySelector(a.ARROW_RIGHT),this.bindArrows())},getArrows:function(){var e=document.createDocumentFragment(),t=document.createElement("a"),s=document.createElement("a");return t.setAttribute("href","javascript:;"),t.setAttribute("class",r),t.setAttribute("id",a.ARROW_LEFT.substring(1,a.ARROW_LEFT.length)),t.innerHTML="&lt;",s.setAttribute("href","javascript:;"),s.setAttribute("class",o),s.setAttribute("id",a.ARROW_RIGHT.substring(1,a.ARROW_RIGHT.length)),s.innerHTML="&gt;",e.appendChild(t),e.appendChild(s),e},initDots:function(){this.carouselOptions.showCarouselDot&&(this.carousel.appendChild(this.getDots()),this.carouselDots=document.querySelector(a.CAROUSEL_DOTS),this.setDot(),this.bindDots())},getDots:function(){var e=document.createElement("div");e.setAttribute("class",n);var t=document.createElement("div");t.setAttribute("class",u),t.setAttribute("id",a.CAROUSEL_DOTS.substring(1,a.CAROUSEL_DOTS.length));for(var s=document.createDocumentFragment(),r=document.createElement("span"),i=0,o=this.carouselCount;i<o;i++)(r=r.cloneNode(!1)).setAttribute("class",l),s.appendChild(r);return t.appendChild(s),e.appendChild(t),e},bindDots:function(){for(var s=this,e=0,t=this.carouselDots.children.length;e<t;e++)!function(t){c(s.carouselDots.children[t],"click",function(e){s.dotIndex=t+1,s.isCarouselAnimate||s.carouselIndex===s.dotIndex||(s.isDotClick=!0,s.moveDot())})}(e)},moveDot:function(){this.changeCarousel(),this.carouselIndex=this.dotIndex,this.setDot()},changeCarousel:function(){this.currentNode=this.carouselWrap.children[this.carouselIndex];var e=this.carouselWrap.children[this.dotIndex];if(this.carouselIndex<this.dotIndex){var t=this.currentNode.nextElementSibling;this.carouselWrap.insertBefore(e.cloneNode(!0),t),this.moveCarousel(this.getLeft(this.carouselWrap)-this.carouselWidth,-this.carouselAnimateSpeed)}this.carouselIndex>this.dotIndex&&(this.carouselWrap.insertBefore(e.cloneNode(!0),this.currentNode),this.setLeft(this.carouselWrap,-(this.carouselIndex+1)*this.carouselWidth),this.moveCarousel(this.getLeft(this.carouselWrap)+this.carouselWidth,this.carouselAnimateSpeed))},setDot:function(){for(var e=0,t=this.carouselDots.children.length;e<t;e++)this.carouselDots.children[e].setAttribute("class",l);this.carouselDots.children[this.carouselIndex-1].setAttribute("class",s)},playCarousel:function(){var e=this;this.carouselIntervalr&&clearInterval(this.carouselIntervalr),this.carouselIntervalr=window.setInterval(function(){e.nextCarousel()},this.carouselOptions.carouselInterval)},bindCarousel:function(){var t=this;c(this.carousel,"mouseenter",function(e){clearInterval(t.carouselIntervalr)}),c(this.carousel,"mouseleave",function(e){t.playCarousel()}),c(document,"visibilitychange",function(e){document.hidden?clearInterval(t.carouselIntervalr):t.playCarousel()})},bindArrows:function(){var t=this;c(this.arrowLeft,"click",function(e){t.prevCarousel()}),c(this.arrowRight,"click",function(e){t.nextCarousel()})},isFirstCarousel:function(){return 0===this.getLeft(this.carouselWrap)},isLastCarousel:function(){var e=this.carouselWidth-this.getWidth(this.carouselWrap);return this.getLeft(this.carouselWrap)===e},prevCarousel:function(){this.isCarouselAnimate||(this.carouselIndex--,this.carouselIndex<1&&(this.carouselIndex=this.carouselCount),this.moveCarousel(this.getLeft(this.carouselWrap)+this.carouselWidth,this.carouselAnimateSpeed),this.carouselOptions.showCarouselDot&&this.setDot())},nextCarousel:function(){this.isCarouselAnimate||(this.carouselIndex++,this.carouselIndex>this.carouselCount&&(this.carouselIndex=1),this.moveCarousel(this.getLeft(this.carouselWrap)-this.carouselWidth,-this.carouselAnimateSpeed),this.carouselOptions.showCarouselDot&&this.setDot())},moveCarousel:function(t,s){var r=this;r.isCarouselAnimate=!0;var i=window.requestAnimationFrame(function e(){0<s&&r.getLeft(r.carouselWrap)<t||s<0&&r.getLeft(r.carouselWrap)>t?(r.setLeft(r.carouselWrap,r.getLeft(r.carouselWrap)+s),i=window.requestAnimationFrame(e)):(window.cancelAnimationFrame(i),r.resetCarousel(t,s))})},resetCarousel:function(e,t){this.isDotClick?this.resetMoveDot(t):this.resetMoveCarousel(e),this.isDotClick=!1,this.isCarouselAnimate=!1},resetMoveDot:function(e){this.setLeft(this.carouselWrap,-this.dotIndex*this.carouselWidth),e<0?this.carouselWrap.removeChild(this.currentNode.nextElementSibling):this.carouselWrap.removeChild(this.currentNode.previousElementSibling)},resetMoveCarousel:function(e){this.setLeft(this.carouselWrap,e),e>-this.carouselWidth&&this.setLeft(this.carouselWrap,-this.carouselCount*this.carouselWidth),e<-this.carouselWidth*this.carouselCount&&this.setLeft(this.carouselWrap,-this.carouselWidth)},constructor:e},e});